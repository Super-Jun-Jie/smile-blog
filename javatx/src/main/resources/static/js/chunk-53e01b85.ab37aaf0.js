(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53e01b85"],{"3e3e":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),i("el-breadcrumb-item",[t._v("文章管理")]),i("el-breadcrumb-item",[t._v("文章列表")])],1),i("el-card",[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:8}},[i("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:t.getArticleList},model:{value:t.queryParam.query,callback:function(e){t.$set(t.queryParam,"query",e)},expression:"queryParam.query"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getArticleList},slot:"append"})],1)],1),i("el-col",{attrs:{span:4}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.markDownDialogVisible=!0}}},[t._v("添加文章")])],1)],1),i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:t.articleList}},[i("el-table-column",{attrs:{fixed:"",prop:"category.cateName",label:"分类",width:"150"}}),i("el-table-column",{attrs:{prop:"title",label:"标题"}}),i("el-table-column",{attrs:{prop:"modifyDate",label:"最近编辑时间",width:"160"}}),i("el-table-column",{attrs:{prop:"creator",label:"作者",width:"120"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑 ")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.removeArticleById(e.row.id)}}},[t._v("删除 ")])]}}])})],1),i("el-pagination",{attrs:{"current-page":t.queryParam.pageNum,"page-sizes":[2,5,10,15],"page-size":t.queryParam.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),i("el-dialog",{attrs:{title:"发表文章",visible:t.markDownDialogVisible,width:"75%","close-on-click-modal":!1},on:{"update:visible":function(e){t.markDownDialogVisible=e},close:t.addMarkDownDialogClosed}},[i("div",{staticClass:"article-header"},[i("div",[i("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择文章栏目"},model:{value:t.article.cid,callback:function(e){t.$set(t.article,"cid",e)},expression:"article.cid"}},t._l(t.categoryList,(function(t){return i("el-option",{key:t.id,attrs:{label:t.cateName,value:t.id}})})),1)],1),i("div",[i("el-input",{staticStyle:{width:"400px","margin-left":"10px"},attrs:{placeholder:"请输入标题..."},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),i("div",[t._l(t.article.tags,(function(e){return i("el-tag",{key:e,attrs:{closable:"","disable-transitions":!1},on:{close:function(i){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-circle-plus-outline",circle:"",size:"small"},on:{click:t.showInput}})],2)]),i("mavon-editor",{ref:"md",staticClass:"editor",model:{value:t.article.mdContent,callback:function(e){t.$set(t.article,"mdContent",e)},expression:"article.mdContent"}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.markDownDialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.saveArticle}},[t._v("确 定")])],1)],1)],1)],1)},l=[],r=i("fa7d"),s={data(){return{inputVisible:!1,inputValue:"",categoryList:[],queryParam:{query:"",pageNum:1,pageSize:10},article:{title:"",mdContent:"",htmlContent:"",cid:"",tags:["赞","后端"],content:""},value:"",total:0,articleList:[],markDownDialogVisible:!1}},created(){this.getArticleList(),this.getCategoryList()},methods:{async getCategoryList(){const{data:t}=await this.$http.get("categoryList");this.categoryList=t.data},handleClose(t){this.article.tags.splice(this.article.tags.indexOf(t),1)},showInput(){this.inputVisible=!0,this.$nextTick(()=>{this.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm(){let t=this.inputValue;t&&this.article.tags.push(t),this.inputVisible=!1,this.inputValue=""},async saveArticle(){if(!Object(r["a"])(this.article.cid,this.article.title,this.article.mdContent))return this.$message.error("数据不能为弄！");this.article.htmlContent=this.$refs.md.d_render,this.article.content=this.$refs.md.d_value;const{data:t}=await this.$http.post("article",this.article);console.log(t),this.$message.success("添加文章成功！"),this.markDownDialogVisible=!1,this.getArticleList()},addMarkDownDialogClosed(){this.resetArticle()},resetArticle(){this.article.cid="",this.article.title="",this.article.mdContent="",this.article.htmlContent="",this.article.content=""},async getArticleList(){const{data:t}=await this.$http.get("article",{params:this.queryParam});console.log(t),this.articleList=t.data,this.total=t.count},handleSizeChange(t){this.queryParam.pageSize=t,this.getArticleList()},handleCurrentChange(t){this.queryParam.pageNum=t,this.getArticleList()},async removeArticleById(t){console.log(t);const e=await this.$confirm("此操作将永久删除该文章, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch(t=>t);if("confirm"!==e)return this.$message.info("已取消删除");await this.$http.delete("article/"+t),this.$message.success("删除文章成功！"),this.getArticleList()}}},n=s,c=(i("3f82"),i("2877")),o=Object(c["a"])(n,a,l,!1,null,null,null);e["default"]=o.exports},"3f82":function(t,e,i){"use strict";i("fdb1")},fdb1:function(t,e,i){}}]);
//# sourceMappingURL=chunk-53e01b85.ab37aaf0.js.map