{"remainingRequest":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyProfile\\smile-blog\\vue-blog\\src\\components\\Article.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\src\\components\\Article.vue","mtime":1607326419222},{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCg0KLmFydGljbGUtaGVhZGVyew0KICBtYXJnaW4tYm90dG9tOiA1cHg7DQogIGRpc3BsYXk6IGZsZXg7DQogIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQp9DQouZWwtdGFnew0KICBtYXJnaW46IDAgOw0KICBtYXJnaW4tbGVmdDogOHB4Ow0KfQ0KLmlucHV0LW5ldy10YWcgew0KICB3aWR0aDogOTBweDsNCiAgbWFyZ2luLWxlZnQ6IDEwcHg7DQp9DQoNCi5jb250ZW50LWlucHV0LXdyYXBwZXIgew0KICBtYXgtaGVpZ2h0OiA1MHZoOw0KfQ0KDQovKi5lZGl0b3J7Ki8NCi8qICAgIG1heC1oZWlnaHQ6IDYwMHB4OyovDQovKiAgICBvdmVyZmxvdzogYXV0bzsqLw0KLyp9Ki8NCg=="},{"version":3,"sources":["Article.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Article.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>文章管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>文章列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n\r\n\r\n      <!--:gutter el-col之间的间距-->\r\n      <el-row :gutter=\"20\">\r\n        <!--:span 设置比重-->\r\n        <el-col :span=\"8\">\r\n          <el-input placeholder=\"请输入内容\" v-model=\"queryParam.query\" clearable @clear=\"getArticleList\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getArticleList\"></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"markDownDialogVisible = true\">添加文章</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <!--表格-->\r\n      <el-table border stripe\r\n                :data=\"articleList\"\r\n                style=\"width: 100%\">\r\n        <el-table-column\r\n            fixed\r\n            prop=\"category.cateName\"\r\n            label=\"分类\"\r\n            width=\"150\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"title\"\r\n            label=\"标题\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"modifyDate\"\r\n            label=\"最近编辑时间\"\r\n            width=\"160\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"creator\"\r\n            label=\"作者\"\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n                size=\"mini\"\r\n                @click=\"handleEdit(scope.$index, scope.row)\">编辑\r\n            </el-button>\r\n            <el-button\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"removeArticleById(scope.row.id)\">删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页区域 -->\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"queryParam.pageNum\"\r\n          :page-sizes=\"[2, 5, 10, 15]\"\r\n          :page-size=\"queryParam.pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n      ></el-pagination>\r\n\r\n\r\n      <!--:visible.sync 控制对话框显示  你动吧-->\r\n      <el-dialog title=\"发表文章\" :visible.sync=\"markDownDialogVisible\" width=\"75%\" :close-on-click-modal=\"false\"\r\n                 @close=\"addMarkDownDialogClosed\">\r\n        <!--                    <AddArticle />-->\r\n        <div class=\"article-header\">\r\n\r\n\r\n          <div>\r\n            <!--下拉选择框-->\r\n            <el-select v-model=\"article.cid\" placeholder=\"请选择文章栏目\" style=\"width: 150px;\">\r\n              <el-option\r\n                  v-for=\"item in categoryList\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.cateName\"\r\n                  :value=\"item.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </div>\r\n          <div>\r\n            <!--标题-->\r\n            <el-input v-model=\"article.title\" placeholder=\"请输入标题...\" style=\"width: 400px;margin-left: 10px\"></el-input>\r\n          </div>\r\n\r\n          <!--标签-->\r\n\r\n\r\n          <div>\r\n            <el-tag\r\n                :key=\"tag\"\r\n                v-for=\"tag in article.tags\"\r\n                closable\r\n                :disable-transitions=\"false\"\r\n                @close=\"handleClose(tag)\">\r\n              {{ tag }}\r\n            </el-tag>\r\n            <el-input\r\n                class=\"input-new-tag\"\r\n                v-if=\"inputVisible\"\r\n                v-model=\"inputValue\"\r\n                ref=\"saveTagInput\"\r\n                size=\"small\"\r\n                @keyup.enter.native=\"handleInputConfirm\"\r\n                @blur=\"handleInputConfirm\"\r\n            >\r\n            </el-input>\r\n            <el-button v-else type=\"primary\" style=\"margin-left: 10px\" icon=\"el-icon-circle-plus-outline\" circle size=\"small\" @click=\"showInput\"></el-button>\r\n\r\n          </div>\r\n        </div>\r\n\r\n\r\n        <mavon-editor ref=\"md\" class=\"editor\" v-model=\"article.mdContent\"/>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"markDownDialogVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"saveArticle\">确 定</el-button>\r\n                </span>\r\n      </el-dialog>\r\n\r\n\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {isNotNullORBlank} from \"@/utils/utils\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n\r\n      //标签\r\n      inputVisible: false,\r\n      inputValue: '',\r\n\r\n      //分类列表\r\n      categoryList: [],\r\n      queryParam: {\r\n        query: '',\r\n        pageNum: 1,\r\n        pageSize: 10\r\n      },\r\n      article: {\r\n        title: '',\r\n        mdContent: '',\r\n        htmlContent: '',\r\n        cid: '',\r\n        tags: ['赞','后端'],\r\n        content: ''\r\n      },\r\n      value: '',\r\n      total: 0,\r\n      articleList: [],\r\n      markDownDialogVisible: false,\r\n    }\r\n  },\r\n  created() {\r\n    this.getArticleList()\r\n    this.getCategoryList()\r\n  },\r\n  methods: {\r\n    async getCategoryList() {\r\n      const {data: res} = await this.$http.get('categoryList')\r\n      this.categoryList = res.data\r\n\r\n    },\r\n    /*标签*/\r\n    handleClose(tag) {\r\n      this.article.tags.splice(this.article.tags.indexOf(tag), 1);\r\n    },\r\n\r\n    showInput() {\r\n      this.inputVisible = true;\r\n      this.$nextTick(() => {\r\n        this.$refs.saveTagInput.$refs.input.focus();\r\n      });\r\n    },\r\n\r\n    handleInputConfirm() {\r\n      let inputValue = this.inputValue;\r\n      if (inputValue) {\r\n        this.article.tags.push(inputValue);\r\n      }\r\n      this.inputVisible = false;\r\n      this.inputValue = '';\r\n    },\r\n\r\n    //新增文章\r\n    async saveArticle() {\r\n      if (!isNotNullORBlank(this.article.cid, this.article.title, this.article.mdContent))\r\n        return this.$message.error('数据不能为弄！');\r\n      this.article.htmlContent = this.$refs.md.d_render\r\n      this.article.content = this.$refs.md.d_value\r\n      const {data: res} = await this.$http.post('article', this.article)\r\n      console.log(res)\r\n      this.$message.success('添加文章成功！')\r\n      // 隐藏添加用户对话框\r\n      this.markDownDialogVisible = false\r\n      this.getArticleList()\r\n    },\r\n    //关闭新增文章对话框\r\n    addMarkDownDialogClosed() {\r\n      this.resetArticle()\r\n    },\r\n    resetArticle() {\r\n      this.article.cid = ''\r\n      this.article.title = ''\r\n      this.article.mdContent = ''\r\n      this.article.htmlContent = ''\r\n      this.article.content = ''\r\n    },\r\n    async getArticleList() {\r\n      const {data: res} = await this.$http.get('article', {params: this.queryParam})\r\n      console.log(res)\r\n      this.articleList = res.data\r\n      this.total = res.count\r\n\r\n    },\r\n\r\n    // 监听 pagesize改变的事件\r\n    handleSizeChange(newSize) {\r\n      // console.log(newSize)\r\n      this.queryParam.pageSize = newSize\r\n      this.getArticleList()\r\n    },\r\n    // 监听 页码值 改变事件\r\n    handleCurrentChange(newSize) {\r\n      // console.log(newSize)\r\n      this.queryParam.pageNum = newSize\r\n      this.getArticleList()\r\n    },\r\n    //删除\r\n    async removeArticleById(id) {\r\n      console.log(id)\r\n      const confirmResult = await this.$confirm(\r\n          '此操作将永久删除该文章, 是否继续?',\r\n          '提示',\r\n          {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }\r\n      ).catch(err => err)\r\n      // 点击确定 返回值为：confirm\r\n      // 点击取消 返回值为： cancel\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消删除')\r\n      }\r\n      await this.$http.delete('article/' + id)\r\n      this.$message.success('删除文章成功！')\r\n      this.getArticleList()\r\n    },\r\n  }\r\n\r\n}\r\n</script>\r\n<!--你改改试试-->\r\n<style lang=\"less\">\r\n\r\n.article-header{\r\n  margin-bottom: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.el-tag{\r\n  margin: 0 ;\r\n  margin-left: 8px;\r\n}\r\n.input-new-tag {\r\n  width: 90px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.content-input-wrapper {\r\n  max-height: 50vh;\r\n}\r\n\r\n/*.editor{*/\r\n/*    max-height: 600px;*/\r\n/*    overflow: auto;*/\r\n/*}*/\r\n</style>\r\n"]}]}