{"remainingRequest":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyProfile\\springboot-series\\vue-test\\src\\components\\Tags.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyProfile\\springboot-series\\vue-test\\src\\components\\Tags.vue","mtime":1607407308841},{"path":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKXsNCiAgICByZXR1cm57DQogICAgICB3aWR0aDozMDAsDQogICAgICBoZWlnaHQ6MzAwLA0KICAgICAgdGFnc051bToyMCwNCiAgICAgIFJBRElVUzoyMDAsDQogICAgICBzcGVlZFg6TWF0aC5QSS8zNjAsDQogICAgICBzcGVlZFk6TWF0aC5QSS8zNjAsDQogICAgICB0YWdzOiBbXQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6ew0KICAgIENYKCl7DQogICAgICByZXR1cm4gdGhpcy53aWR0aC8yOw0KICAgIH0sDQogICAgQ1koKXsNCiAgICAgIHJldHVybiB0aGlzLmhlaWdodC8yOw0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpey8v5Yid5aeL5YyW5qCH562+5L2N572uDQogICAgdGhpcy5nZXRUYWdzTGlzdCgpDQogIH0sDQogIG1vdW50ZWQoKXsvL+S9v+eQg+W8gOWni+aXi+i9rA0KICAgIHNldEludGVydmFsKCgpID0+IHsNCiAgICAgIHRoaXMucm90YXRlWCh0aGlzLnNwZWVkWCk7DQogICAgICB0aGlzLnJvdGF0ZVkodGhpcy5zcGVlZFkpOw0KICAgIH0sIDE3KQ0KICB9LA0KICBtZXRob2RzOiB7DQoNCg0KICAgIHNldEtleVdvcmQodGFnTmFtZSl7DQogICAgICB0aGlzLiRlbWl0KCdzZXRLZXlXb3JkJyx0YWdOYW1lKQ0KICAgIH0sDQoNCiAgICBhc3luYyBnZXRUYWdzTGlzdCgpIHsNCiAgICAgIGNvbnN0IHtkYXRhOiByZXN9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ2dldFRhZ0xpc3QnKQ0KICAgICAgbGV0IHRhZ3M9W107DQoNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVzLmRhdGEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgbGV0IHRhZyA9IHt9Ow0KICAgICAgICBsZXQgayA9IC0xICsgKDIgKiAoaSArIDEpIC0gMSkgLyByZXMuZGF0YS5sZW5ndGg7DQogICAgICAgIGxldCBhID0gTWF0aC5hY29zKGspOw0KICAgICAgICBsZXQgYiA9IGEgKiBNYXRoLnNxcnQocmVzLmRhdGEubGVuZ3RoICogTWF0aC5QSSkvL+iuoeeul+agh+etvuebuOWvueS6jueQg+W/g+eahOinkuW6pg0KICAgICAgICB0YWcudGFnTmFtZSA9IHJlcy5kYXRhW2ldOw0KICAgICAgICB0YWcueCA9IHRoaXMuQ1ggKyAgdGhpcy5SQURJVVMgKiBNYXRoLnNpbihhKSAqIE1hdGguY29zKGIpOy8v5qC55o2u5qCH562+6KeS5bqm5rGC5Ye65qCH562+55qEeCx5LHrlnZDmoIcNCiAgICAgICAgdGFnLnkgPSB0aGlzLkNZICsgIHRoaXMuUkFESVVTICogTWF0aC5zaW4oYSkgKiBNYXRoLnNpbihiKTsNCiAgICAgICAgdGFnLnogPSB0aGlzLlJBRElVUyAqIE1hdGguY29zKGEpOw0KICAgICAgICB0YWdzLnB1c2godGFnKTsNCiAgICAgIH0NCg0KDQoNCiAgICAgIHRoaXMudGFncyA9IHRhZ3MNCg0KICAgIH0sDQogICAgcm90YXRlWChhbmdsZVgpew0KICAgICAgdmFyIGNvcyA9IE1hdGguY29zKGFuZ2xlWCk7DQogICAgICB2YXIgc2luID0gTWF0aC5zaW4oYW5nbGVYKTsNCiAgICAgIGZvcihsZXQgdGFnIG9mIHRoaXMudGFncyl7DQogICAgICAgIHZhciB5MSA9ICh0YWcueS0gdGhpcy5DWSkgKiBjb3MgLSB0YWcueiAqIHNpbiAgKyB0aGlzLkNZOw0KICAgICAgICB2YXIgejEgPSB0YWcueiAqIGNvcyArICh0YWcueS0gdGhpcy5DWSkgKiBzaW47DQogICAgICAgIHRhZy55ID0geTE7DQogICAgICAgIHRhZy56ID0gejE7DQogICAgICB9DQogICAgfSwNCiAgICByb3RhdGVZKGFuZ2xlWSl7DQogICAgICB2YXIgY29zID0gTWF0aC5jb3MoYW5nbGVZKTsNCiAgICAgIHZhciBzaW4gPSBNYXRoLnNpbihhbmdsZVkpOw0KICAgICAgZm9yKGxldCB0YWcgb2YgdGhpcy50YWdzKXsNCiAgICAgICAgdmFyIHgxID0gKHRhZy54IC0gdGhpcy5DWCkgKiBjb3MgLSB0YWcueiAqIHNpbiArIHRoaXMuQ1g7DQogICAgICAgIHZhciB6MSA9IHRhZy56ICogY29zICsgKHRhZy54LXRoaXMuQ1gpICogc2luOw0KICAgICAgICB0YWcueCA9IHgxOw0KICAgICAgICB0YWcueiA9IHoxOw0KICAgICAgfQ0KICAgIH0sDQogICAgbGlzdGVuZXIoZXZlbnQpey8v5ZON5bqU6byg5qCH56e75YqoDQogICAgICB2YXIgeCA9IGV2ZW50LmNsaWVudFggLSB0aGlzLkNYOw0KICAgICAgdmFyIHkgPSBldmVudC5jbGllbnRZIC0gdGhpcy5DWTsNCiAgICAgIHRoaXMuc3BlZWRYID0geCowLjAwMDE+MCA/IE1hdGgubWluKHRoaXMuUkFESVVTKjAuMDAwMDIsIHgqMC4wMDAxKSA6IE1hdGgubWF4KC10aGlzLlJBRElVUyowLjAwMDAyLCB4KjAuMDAwMSk7DQogICAgICB0aGlzLnNwZWVkWSA9IHkqMC4wMDAxPjAgPyBNYXRoLm1pbih0aGlzLlJBRElVUyowLjAwMDAyLCB5KjAuMDAwMSkgOiBNYXRoLm1heCgtdGhpcy5SQURJVVMqMC4wMDAwMiwgeSowLjAwMDEpOw0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["Tags.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tags.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <svg :width='width' :height='height' @mousemove='listener($event)'>\r\n      <a @click=\"setKeyWord(tag.tagName)\" v-for='(tag,index) in tags' :key=\"index\">\r\n        <text :x='tag.x' :y='tag.y' :font-size='20 * (600/(600-tag.z))' :fill-opacity='((400+tag.z)/600)'>{{tag.tagName}}</text>\r\n      </a>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    return{\r\n      width:300,\r\n      height:300,\r\n      tagsNum:20,\r\n      RADIUS:200,\r\n      speedX:Math.PI/360,\r\n      speedY:Math.PI/360,\r\n      tags: []\r\n    }\r\n  },\r\n  computed:{\r\n    CX(){\r\n      return this.width/2;\r\n    },\r\n    CY(){\r\n      return this.height/2;\r\n    }\r\n  },\r\n  created(){//初始化标签位置\r\n    this.getTagsList()\r\n  },\r\n  mounted(){//使球开始旋转\r\n    setInterval(() => {\r\n      this.rotateX(this.speedX);\r\n      this.rotateY(this.speedY);\r\n    }, 17)\r\n  },\r\n  methods: {\r\n\r\n\r\n    setKeyWord(tagName){\r\n      this.$emit('setKeyWord',tagName)\r\n    },\r\n\r\n    async getTagsList() {\r\n      const {data: res} = await this.$http.get('getTagList')\r\n      let tags=[];\r\n\r\n      for (let i = 0; i < res.data.length; i++) {\r\n        let tag = {};\r\n        let k = -1 + (2 * (i + 1) - 1) / res.data.length;\r\n        let a = Math.acos(k);\r\n        let b = a * Math.sqrt(res.data.length * Math.PI)//计算标签相对于球心的角度\r\n        tag.tagName = res.data[i];\r\n        tag.x = this.CX +  this.RADIUS * Math.sin(a) * Math.cos(b);//根据标签角度求出标签的x,y,z坐标\r\n        tag.y = this.CY +  this.RADIUS * Math.sin(a) * Math.sin(b);\r\n        tag.z = this.RADIUS * Math.cos(a);\r\n        tags.push(tag);\r\n      }\r\n\r\n\r\n\r\n      this.tags = tags\r\n\r\n    },\r\n    rotateX(angleX){\r\n      var cos = Math.cos(angleX);\r\n      var sin = Math.sin(angleX);\r\n      for(let tag of this.tags){\r\n        var y1 = (tag.y- this.CY) * cos - tag.z * sin  + this.CY;\r\n        var z1 = tag.z * cos + (tag.y- this.CY) * sin;\r\n        tag.y = y1;\r\n        tag.z = z1;\r\n      }\r\n    },\r\n    rotateY(angleY){\r\n      var cos = Math.cos(angleY);\r\n      var sin = Math.sin(angleY);\r\n      for(let tag of this.tags){\r\n        var x1 = (tag.x - this.CX) * cos - tag.z * sin + this.CX;\r\n        var z1 = tag.z * cos + (tag.x-this.CX) * sin;\r\n        tag.x = x1;\r\n        tag.z = z1;\r\n      }\r\n    },\r\n    listener(event){//响应鼠标移动\r\n      var x = event.clientX - this.CX;\r\n      var y = event.clientY - this.CY;\r\n      this.speedX = x*0.0001>0 ? Math.min(this.RADIUS*0.00002, x*0.0001) : Math.max(-this.RADIUS*0.00002, x*0.0001);\r\n      this.speedY = y*0.0001>0 ? Math.min(this.RADIUS*0.00002, y*0.0001) : Math.max(-this.RADIUS*0.00002, y*0.0001);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n"]}]}