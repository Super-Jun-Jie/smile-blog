{"remainingRequest":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyProfile\\springboot-series\\vue-test\\src\\components\\Tags.vue?vue&type=style&index=0&id=acc9a86e&scoped=true&lang=css&","dependencies":[{"path":"D:\\MyProfile\\springboot-series\\vue-test\\src\\components\\Tags.vue","mtime":1607407208215},{"path":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProfile\\springboot-series\\vue-test\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5hew0KICBjdXJzb3I6IHBvaW50ZXI7DQp9DQo="},{"version":3,"sources":["Tags.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA","file":"Tags.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <svg :width='width' :height='height' @mousemove='listener($event)'>\r\n      <a @click=\"setKeyWord(tag.tagName)\" v-for='(tag,index) in tags' :key=\"index\">\r\n        <text :x='tag.x' :y='tag.y' :font-size='20 * (600/(600-tag.z))' :fill-opacity='((400+tag.z)/600)'>{{tag.tagName}}</text>\r\n      </a>\r\n    </svg>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data(){\r\n    return{\r\n      width:300,\r\n      height:300,\r\n      tagsNum:20,\r\n      RADIUS:200,\r\n      speedX:Math.PI/360,\r\n      speedY:Math.PI/360,\r\n      tags: []\r\n    }\r\n  },\r\n  computed:{\r\n    CX(){\r\n      return this.width/2;\r\n    },\r\n    CY(){\r\n      return this.height/2;\r\n    }\r\n  },\r\n  created(){//初始化标签位置\r\n    this.getTagsList()\r\n  },\r\n  mounted(){//使球开始旋转\r\n    setInterval(() => {\r\n      this.rotateX(this.speedX);\r\n      this.rotateY(this.speedY);\r\n    }, 17)\r\n  },\r\n  methods: {\r\n\r\n\r\n    setKeyWord(tagName){\r\n      this.$emit('setKeyWord',tagName)\r\n    },\r\n\r\n    async getTagsList() {\r\n      const {data: res} = await this.$http.get('getTagList')\r\n      let tags=[];\r\n\r\n      for (let i = 0; i < res.data.length; i++) {\r\n        let tag = {};\r\n        let k = -1 + (2 * (i + 1) - 1) / res.data.length;\r\n        let a = Math.acos(k);\r\n        let b = a * Math.sqrt(res.data.length * Math.PI)//计算标签相对于球心的角度\r\n        tag.tagName = res.data[i];\r\n        tag.x = this.CX +  this.RADIUS * Math.sin(a) * Math.cos(b);//根据标签角度求出标签的x,y,z坐标\r\n        tag.y = this.CY +  this.RADIUS * Math.sin(a) * Math.sin(b);\r\n        tag.z = this.RADIUS * Math.cos(a);\r\n        tags.push(tag);\r\n      }\r\n\r\n\r\n\r\n      this.tags = tags\r\n\r\n    },\r\n    rotateX(angleX){\r\n      var cos = Math.cos(angleX);\r\n      var sin = Math.sin(angleX);\r\n      for(let tag of this.tags){\r\n        var y1 = (tag.y- this.CY) * cos - tag.z * sin  + this.CY;\r\n        var z1 = tag.z * cos + (tag.y- this.CY) * sin;\r\n        tag.y = y1;\r\n        tag.z = z1;\r\n      }\r\n    },\r\n    rotateY(angleY){\r\n      var cos = Math.cos(angleY);\r\n      var sin = Math.sin(angleY);\r\n      for(let tag of this.tags){\r\n        var x1 = (tag.x - this.CX) * cos - tag.z * sin + this.CX;\r\n        var z1 = tag.z * cos + (tag.x-this.CX) * sin;\r\n        tag.x = x1;\r\n        tag.z = z1;\r\n      }\r\n    },\r\n    listener(event){//响应鼠标移动\r\n      var x = event.clientX - this.CX;\r\n      var y = event.clientY - this.CY;\r\n      this.speedX = x*0.0001>0 ? Math.min(this.RADIUS*0.00002, x*0.0001) : Math.max(-this.RADIUS*0.00002, x*0.0001);\r\n      this.speedY = y*0.0001>0 ? Math.min(this.RADIUS*0.00002, y*0.0001) : Math.max(-this.RADIUS*0.00002, y*0.0001);\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.a{\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"]}]}