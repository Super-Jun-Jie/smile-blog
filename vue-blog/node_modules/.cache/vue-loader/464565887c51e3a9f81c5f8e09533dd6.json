{"remainingRequest":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\MyProfile\\smile-blog\\vue-blog\\src\\components\\Article.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\src\\components\\Article.vue","mtime":1607326419222},{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\MyProfile\\smile-blog\\vue-blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2lzTm90TnVsbE9SQmxhbmt9IGZyb20gIkAvdXRpbHMvdXRpbHMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCg0KICAgICAgLy/moIfnrb4NCiAgICAgIGlucHV0VmlzaWJsZTogZmFsc2UsDQogICAgICBpbnB1dFZhbHVlOiAnJywNCg0KICAgICAgLy/liIbnsbvliJfooagNCiAgICAgIGNhdGVnb3J5TGlzdDogW10sDQogICAgICBxdWVyeVBhcmFtOiB7DQogICAgICAgIHF1ZXJ5OiAnJywNCiAgICAgICAgcGFnZU51bTogMSwNCiAgICAgICAgcGFnZVNpemU6IDEwDQogICAgICB9LA0KICAgICAgYXJ0aWNsZTogew0KICAgICAgICB0aXRsZTogJycsDQogICAgICAgIG1kQ29udGVudDogJycsDQogICAgICAgIGh0bWxDb250ZW50OiAnJywNCiAgICAgICAgY2lkOiAnJywNCiAgICAgICAgdGFnczogWyfotZ4nLCflkI7nq68nXSwNCiAgICAgICAgY29udGVudDogJycNCiAgICAgIH0sDQogICAgICB2YWx1ZTogJycsDQogICAgICB0b3RhbDogMCwNCiAgICAgIGFydGljbGVMaXN0OiBbXSwNCiAgICAgIG1hcmtEb3duRGlhbG9nVmlzaWJsZTogZmFsc2UsDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMuZ2V0QXJ0aWNsZUxpc3QoKQ0KICAgIHRoaXMuZ2V0Q2F0ZWdvcnlMaXN0KCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGdldENhdGVnb3J5TGlzdCgpIHsNCiAgICAgIGNvbnN0IHtkYXRhOiByZXN9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ2NhdGVnb3J5TGlzdCcpDQogICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhDQoNCiAgICB9LA0KICAgIC8q5qCH562+Ki8NCiAgICBoYW5kbGVDbG9zZSh0YWcpIHsNCiAgICAgIHRoaXMuYXJ0aWNsZS50YWdzLnNwbGljZSh0aGlzLmFydGljbGUudGFncy5pbmRleE9mKHRhZyksIDEpOw0KICAgIH0sDQoNCiAgICBzaG93SW5wdXQoKSB7DQogICAgICB0aGlzLmlucHV0VmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuJHJlZnMuc2F2ZVRhZ0lucHV0LiRyZWZzLmlucHV0LmZvY3VzKCk7DQogICAgICB9KTsNCiAgICB9LA0KDQogICAgaGFuZGxlSW5wdXRDb25maXJtKCkgew0KICAgICAgbGV0IGlucHV0VmFsdWUgPSB0aGlzLmlucHV0VmFsdWU7DQogICAgICBpZiAoaW5wdXRWYWx1ZSkgew0KICAgICAgICB0aGlzLmFydGljbGUudGFncy5wdXNoKGlucHV0VmFsdWUpOw0KICAgICAgfQ0KICAgICAgdGhpcy5pbnB1dFZpc2libGUgPSBmYWxzZTsNCiAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9ICcnOw0KICAgIH0sDQoNCiAgICAvL+aWsOWinuaWh+eroA0KICAgIGFzeW5jIHNhdmVBcnRpY2xlKCkgew0KICAgICAgaWYgKCFpc05vdE51bGxPUkJsYW5rKHRoaXMuYXJ0aWNsZS5jaWQsIHRoaXMuYXJ0aWNsZS50aXRsZSwgdGhpcy5hcnRpY2xlLm1kQ29udGVudCkpDQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfmlbDmja7kuI3og73kuLrlvITvvIEnKTsNCiAgICAgIHRoaXMuYXJ0aWNsZS5odG1sQ29udGVudCA9IHRoaXMuJHJlZnMubWQuZF9yZW5kZXINCiAgICAgIHRoaXMuYXJ0aWNsZS5jb250ZW50ID0gdGhpcy4kcmVmcy5tZC5kX3ZhbHVlDQogICAgICBjb25zdCB7ZGF0YTogcmVzfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnYXJ0aWNsZScsIHRoaXMuYXJ0aWNsZSkNCiAgICAgIGNvbnNvbGUubG9nKHJlcykNCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5re75Yqg5paH56ug5oiQ5Yqf77yBJykNCiAgICAgIC8vIOmakOiXj+a3u+WKoOeUqOaIt+Wvueivneahhg0KICAgICAgdGhpcy5tYXJrRG93bkRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy5nZXRBcnRpY2xlTGlzdCgpDQogICAgfSwNCiAgICAvL+WFs+mXreaWsOWinuaWh+eroOWvueivneahhg0KICAgIGFkZE1hcmtEb3duRGlhbG9nQ2xvc2VkKCkgew0KICAgICAgdGhpcy5yZXNldEFydGljbGUoKQ0KICAgIH0sDQogICAgcmVzZXRBcnRpY2xlKCkgew0KICAgICAgdGhpcy5hcnRpY2xlLmNpZCA9ICcnDQogICAgICB0aGlzLmFydGljbGUudGl0bGUgPSAnJw0KICAgICAgdGhpcy5hcnRpY2xlLm1kQ29udGVudCA9ICcnDQogICAgICB0aGlzLmFydGljbGUuaHRtbENvbnRlbnQgPSAnJw0KICAgICAgdGhpcy5hcnRpY2xlLmNvbnRlbnQgPSAnJw0KICAgIH0sDQogICAgYXN5bmMgZ2V0QXJ0aWNsZUxpc3QoKSB7DQogICAgICBjb25zdCB7ZGF0YTogcmVzfSA9IGF3YWl0IHRoaXMuJGh0dHAuZ2V0KCdhcnRpY2xlJywge3BhcmFtczogdGhpcy5xdWVyeVBhcmFtfSkNCiAgICAgIGNvbnNvbGUubG9nKHJlcykNCiAgICAgIHRoaXMuYXJ0aWNsZUxpc3QgPSByZXMuZGF0YQ0KICAgICAgdGhpcy50b3RhbCA9IHJlcy5jb3VudA0KDQogICAgfSwNCg0KICAgIC8vIOebkeWQrCBwYWdlc2l6ZeaUueWPmOeahOS6i+S7tg0KICAgIGhhbmRsZVNpemVDaGFuZ2UobmV3U2l6ZSkgew0KICAgICAgLy8gY29uc29sZS5sb2cobmV3U2l6ZSkNCiAgICAgIHRoaXMucXVlcnlQYXJhbS5wYWdlU2l6ZSA9IG5ld1NpemUNCiAgICAgIHRoaXMuZ2V0QXJ0aWNsZUxpc3QoKQ0KICAgIH0sDQogICAgLy8g55uR5ZCsIOmhteeggeWAvCDmlLnlj5jkuovku7YNCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKG5ld1NpemUpIHsNCiAgICAgIC8vIGNvbnNvbGUubG9nKG5ld1NpemUpDQogICAgICB0aGlzLnF1ZXJ5UGFyYW0ucGFnZU51bSA9IG5ld1NpemUNCiAgICAgIHRoaXMuZ2V0QXJ0aWNsZUxpc3QoKQ0KICAgIH0sDQogICAgLy/liKDpmaQNCiAgICBhc3luYyByZW1vdmVBcnRpY2xlQnlJZChpZCkgew0KICAgICAgY29uc29sZS5sb2coaWQpDQogICAgICBjb25zdCBjb25maXJtUmVzdWx0ID0gYXdhaXQgdGhpcy4kY29uZmlybSgNCiAgICAgICAgICAn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5paH56ugLCDmmK/lkKbnu6fnu60/JywNCiAgICAgICAgICAn5o+Q56S6JywNCiAgICAgICAgICB7DQogICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICAgIH0NCiAgICAgICkuY2F0Y2goZXJyID0+IGVycikNCiAgICAgIC8vIOeCueWHu+ehruWumiDov5Tlm57lgLzkuLrvvJpjb25maXJtDQogICAgICAvLyDngrnlh7vlj5bmtogg6L+U5Zue5YC85Li677yaIGNhbmNlbA0KICAgICAgaWYgKGNvbmZpcm1SZXN1bHQgIT09ICdjb25maXJtJykgew0KICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5pbmZvKCflt7Llj5bmtojliKDpmaQnKQ0KICAgICAgfQ0KICAgICAgYXdhaXQgdGhpcy4kaHR0cC5kZWxldGUoJ2FydGljbGUvJyArIGlkKQ0KICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmlofnq6DmiJDlip/vvIEnKQ0KICAgICAgdGhpcy5nZXRBcnRpY2xlTGlzdCgpDQogICAgfSwNCiAgfQ0KDQp9DQo="},{"version":3,"sources":["Article.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyIA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"Article.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>文章管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>文章列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n\r\n\r\n      <!--:gutter el-col之间的间距-->\r\n      <el-row :gutter=\"20\">\r\n        <!--:span 设置比重-->\r\n        <el-col :span=\"8\">\r\n          <el-input placeholder=\"请输入内容\" v-model=\"queryParam.query\" clearable @clear=\"getArticleList\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getArticleList\"></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"markDownDialogVisible = true\">添加文章</el-button>\r\n        </el-col>\r\n      </el-row>\r\n      <!--表格-->\r\n      <el-table border stripe\r\n                :data=\"articleList\"\r\n                style=\"width: 100%\">\r\n        <el-table-column\r\n            fixed\r\n            prop=\"category.cateName\"\r\n            label=\"分类\"\r\n            width=\"150\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"title\"\r\n            label=\"标题\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"modifyDate\"\r\n            label=\"最近编辑时间\"\r\n            width=\"160\">\r\n        </el-table-column>\r\n        <el-table-column\r\n            prop=\"creator\"\r\n            label=\"作者\"\r\n            width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button\r\n                size=\"mini\"\r\n                @click=\"handleEdit(scope.$index, scope.row)\">编辑\r\n            </el-button>\r\n            <el-button\r\n                size=\"mini\"\r\n                type=\"danger\"\r\n                @click=\"removeArticleById(scope.row.id)\">删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页区域 -->\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"queryParam.pageNum\"\r\n          :page-sizes=\"[2, 5, 10, 15]\"\r\n          :page-size=\"queryParam.pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n      ></el-pagination>\r\n\r\n\r\n      <!--:visible.sync 控制对话框显示  你动吧-->\r\n      <el-dialog title=\"发表文章\" :visible.sync=\"markDownDialogVisible\" width=\"75%\" :close-on-click-modal=\"false\"\r\n                 @close=\"addMarkDownDialogClosed\">\r\n        <!--                    <AddArticle />-->\r\n        <div class=\"article-header\">\r\n\r\n\r\n          <div>\r\n            <!--下拉选择框-->\r\n            <el-select v-model=\"article.cid\" placeholder=\"请选择文章栏目\" style=\"width: 150px;\">\r\n              <el-option\r\n                  v-for=\"item in categoryList\"\r\n                  :key=\"item.id\"\r\n                  :label=\"item.cateName\"\r\n                  :value=\"item.id\">\r\n              </el-option>\r\n            </el-select>\r\n          </div>\r\n          <div>\r\n            <!--标题-->\r\n            <el-input v-model=\"article.title\" placeholder=\"请输入标题...\" style=\"width: 400px;margin-left: 10px\"></el-input>\r\n          </div>\r\n\r\n          <!--标签-->\r\n\r\n\r\n          <div>\r\n            <el-tag\r\n                :key=\"tag\"\r\n                v-for=\"tag in article.tags\"\r\n                closable\r\n                :disable-transitions=\"false\"\r\n                @close=\"handleClose(tag)\">\r\n              {{ tag }}\r\n            </el-tag>\r\n            <el-input\r\n                class=\"input-new-tag\"\r\n                v-if=\"inputVisible\"\r\n                v-model=\"inputValue\"\r\n                ref=\"saveTagInput\"\r\n                size=\"small\"\r\n                @keyup.enter.native=\"handleInputConfirm\"\r\n                @blur=\"handleInputConfirm\"\r\n            >\r\n            </el-input>\r\n            <el-button v-else type=\"primary\" style=\"margin-left: 10px\" icon=\"el-icon-circle-plus-outline\" circle size=\"small\" @click=\"showInput\"></el-button>\r\n\r\n          </div>\r\n        </div>\r\n\r\n\r\n        <mavon-editor ref=\"md\" class=\"editor\" v-model=\"article.mdContent\"/>\r\n        <span slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"markDownDialogVisible = false\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"saveArticle\">确 定</el-button>\r\n                </span>\r\n      </el-dialog>\r\n\r\n\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {isNotNullORBlank} from \"@/utils/utils\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n\r\n      //标签\r\n      inputVisible: false,\r\n      inputValue: '',\r\n\r\n      //分类列表\r\n      categoryList: [],\r\n      queryParam: {\r\n        query: '',\r\n        pageNum: 1,\r\n        pageSize: 10\r\n      },\r\n      article: {\r\n        title: '',\r\n        mdContent: '',\r\n        htmlContent: '',\r\n        cid: '',\r\n        tags: ['赞','后端'],\r\n        content: ''\r\n      },\r\n      value: '',\r\n      total: 0,\r\n      articleList: [],\r\n      markDownDialogVisible: false,\r\n    }\r\n  },\r\n  created() {\r\n    this.getArticleList()\r\n    this.getCategoryList()\r\n  },\r\n  methods: {\r\n    async getCategoryList() {\r\n      const {data: res} = await this.$http.get('categoryList')\r\n      this.categoryList = res.data\r\n\r\n    },\r\n    /*标签*/\r\n    handleClose(tag) {\r\n      this.article.tags.splice(this.article.tags.indexOf(tag), 1);\r\n    },\r\n\r\n    showInput() {\r\n      this.inputVisible = true;\r\n      this.$nextTick(() => {\r\n        this.$refs.saveTagInput.$refs.input.focus();\r\n      });\r\n    },\r\n\r\n    handleInputConfirm() {\r\n      let inputValue = this.inputValue;\r\n      if (inputValue) {\r\n        this.article.tags.push(inputValue);\r\n      }\r\n      this.inputVisible = false;\r\n      this.inputValue = '';\r\n    },\r\n\r\n    //新增文章\r\n    async saveArticle() {\r\n      if (!isNotNullORBlank(this.article.cid, this.article.title, this.article.mdContent))\r\n        return this.$message.error('数据不能为弄！');\r\n      this.article.htmlContent = this.$refs.md.d_render\r\n      this.article.content = this.$refs.md.d_value\r\n      const {data: res} = await this.$http.post('article', this.article)\r\n      console.log(res)\r\n      this.$message.success('添加文章成功！')\r\n      // 隐藏添加用户对话框\r\n      this.markDownDialogVisible = false\r\n      this.getArticleList()\r\n    },\r\n    //关闭新增文章对话框\r\n    addMarkDownDialogClosed() {\r\n      this.resetArticle()\r\n    },\r\n    resetArticle() {\r\n      this.article.cid = ''\r\n      this.article.title = ''\r\n      this.article.mdContent = ''\r\n      this.article.htmlContent = ''\r\n      this.article.content = ''\r\n    },\r\n    async getArticleList() {\r\n      const {data: res} = await this.$http.get('article', {params: this.queryParam})\r\n      console.log(res)\r\n      this.articleList = res.data\r\n      this.total = res.count\r\n\r\n    },\r\n\r\n    // 监听 pagesize改变的事件\r\n    handleSizeChange(newSize) {\r\n      // console.log(newSize)\r\n      this.queryParam.pageSize = newSize\r\n      this.getArticleList()\r\n    },\r\n    // 监听 页码值 改变事件\r\n    handleCurrentChange(newSize) {\r\n      // console.log(newSize)\r\n      this.queryParam.pageNum = newSize\r\n      this.getArticleList()\r\n    },\r\n    //删除\r\n    async removeArticleById(id) {\r\n      console.log(id)\r\n      const confirmResult = await this.$confirm(\r\n          '此操作将永久删除该文章, 是否继续?',\r\n          '提示',\r\n          {\r\n            confirmButtonText: '确定',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }\r\n      ).catch(err => err)\r\n      // 点击确定 返回值为：confirm\r\n      // 点击取消 返回值为： cancel\r\n      if (confirmResult !== 'confirm') {\r\n        return this.$message.info('已取消删除')\r\n      }\r\n      await this.$http.delete('article/' + id)\r\n      this.$message.success('删除文章成功！')\r\n      this.getArticleList()\r\n    },\r\n  }\r\n\r\n}\r\n</script>\r\n<!--你改改试试-->\r\n<style lang=\"less\">\r\n\r\n.article-header{\r\n  margin-bottom: 5px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n.el-tag{\r\n  margin: 0 ;\r\n  margin-left: 8px;\r\n}\r\n.input-new-tag {\r\n  width: 90px;\r\n  margin-left: 10px;\r\n}\r\n\r\n.content-input-wrapper {\r\n  max-height: 50vh;\r\n}\r\n\r\n/*.editor{*/\r\n/*    max-height: 600px;*/\r\n/*    overflow: auto;*/\r\n/*}*/\r\n</style>\r\n"]}]}